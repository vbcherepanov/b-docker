# üöÄ 1–°-–ë–∏—Ç—Ä–∏–∫—Å Docker - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞

**–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è 1–°-–ë–∏—Ç—Ä–∏–∫—Å: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∞–π—Ç–æ–º**

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π: **Local** | **Development** | **Test** | **Production**

–ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å: **Linux** | **macOS** | **Windows**

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–æ–∫—Ä—É–∂–µ–Ω–∏–π)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ](#-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](#-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- [–ë—ç–∫–∞–ø—ã](#-–±—ç–∫–∞–ø—ã)
- [Troubleshooting](#-troubleshooting)
- [FAQ](#-faq)

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üéØ –ï–¥–∏–Ω—ã–π Bitrix –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- **Supervisor** —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **PHP-FPM** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±-–∑–∞–ø—Ä–æ—Å–æ–≤
- **Cron** –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤ –ë–∏—Ç—Ä–∏–∫—Å
- **PHP-CLI** –¥–ª—è –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

### üîß –ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **PHP 7.4 –∏ 8.3**
- –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è **local / dev / test / prod**
- –í—Å–µ –ø–∞–ø–∫–∏ –ë–∏—Ç—Ä–∏–∫—Å–∞ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑–≤–Ω–µ (`upload`, `local`, `bitrix/cache`)
- –†–∞–±–æ—Ç–∞ –æ—Ç **non-root** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### üìä –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **Prometheus** - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
- **Grafana** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –¥–∞—à–±–æ—Ä–¥—ã
- **Loki** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Promtail** - —Å–±–æ—Ä –ª–æ–≥–æ–≤ —Å–æ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ì–æ—Ç–æ–≤—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ë–∏—Ç—Ä–∏–∫—Å

### üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Fail2ban** - –∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
- **ModSecurity** - Web Application Firewall
- **Rate limiting** - –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS
- **Security headers** - XSS, CSRF –∑–∞—â–∏—Ç–∞
- **SSL/TLS** —Å Let's Encrypt

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **Redis** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **Memcached** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **OPcache** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ PHP –∫–æ–¥–∞
- **MySQL** –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –ë–∏—Ç—Ä–∏–∫—Å
- **Nginx** —Å FastCGI –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- **Makefile** —Å 150+ –∫–æ–º–∞–Ω–¥–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –∂–µ–ª–µ–∑–æ
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∞–π—Ç–∞–º–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ –æ–¥–∏–Ω –∫–ª–∏–∫

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         INTERNET                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      NGINX (Port 80/443)                     ‚îÇ
‚îÇ                   SSL/TLS | Gzip | HTTP/2                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              BITRIX CONTAINER (–ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ               SUPERVISOR (Process Manager)            ‚îÇ   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ PHP-FPM ‚îÇ  ‚îÇ Cron ‚îÇ  ‚îÇ Bitrix Agents/Push&Pull ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  Volumes:                                                    ‚îÇ
‚îÇ  ‚Ä¢ ./www/upload       -> –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∑–æ–∫                      ‚îÇ
‚îÇ  ‚Ä¢ ./www/local        -> –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏                    ‚îÇ
‚îÇ  ‚Ä¢ ./www/bitrix/cache -> –ö—ç—à –ë–∏—Ç—Ä–∏–∫—Å                         ‚îÇ
‚îÇ  ‚Ä¢ ./volume/logs      -> –õ–æ–≥–∏                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                ‚îÇ                ‚îÇ
        ‚ñº                ‚ñº                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    MySQL     ‚îÇ  ‚îÇ   Redis   ‚îÇ  ‚îÇ  Memcached   ‚îÇ
‚îÇ  (–ë–∞–∑–∞ –ë–î)   ‚îÇ  ‚îÇ  (–ö—ç—à 1)  ‚îÇ  ‚îÇ  (–ö—ç—à 2)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                ‚îÇ                ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –õ–û–ì–ò–†–û–í–ê–ù–ò–ï                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ  ‚îÇ Prometheus ‚îÇ  ‚îÇ   Loki     ‚îÇ  ‚îÇ  Grafana   ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  (–ú–µ—Ç—Ä–∏–∫–∏) ‚îÇ  ‚îÇ  (–õ–æ–≥–∏)    ‚îÇ  ‚îÇ (–î–∞—à–±–æ—Ä–¥—ã) ‚îÇ            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üíª –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Docker**: 20.10+
- **Docker Compose**: 2.0+
- **RAM**: 4GB
- **CPU**: 2 cores
- **Disk**: 20GB

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **RAM**: 16GB+
- **CPU**: 4+ cores
- **Disk**: 100GB+ SSD
- **OS**: Linux (Ubuntu 20.04+, Debian 11+, CentOS 8+)

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- ‚úÖ Linux (Ubuntu, Debian, CentOS, Fedora, Arch)
- ‚úÖ macOS (Intel –∏ Apple Silicon)
- ‚úÖ Windows 10/11 (—Å WSL 2)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/your-repo/b-docker.git
cd b-docker
```

### 2. –í—ã–±–æ—Ä –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
cp .env.local.bitrix .env
```

#### –î–ª—è dev —Å–µ—Ä–≤–µ—Ä–∞:
```bash
cp .env.dev.bitrix .env
```

#### –î–ª—è production:
```bash
cp .env.prod.bitrix .env
# –í–ê–ñ–ù–û: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —Å–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏!
nano .env
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DOMAIN=your-site.local
PHP_VERSION=8.3
TZ=Europe/Moscow

# UID/GID (–≤–∞–∂–Ω–æ –¥–ª—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞)
# –£–∑–Ω–∞—Ç—å —Å–≤–æ–∏: id -u –∏ id -g
UID=1000
GID=1000

# –ü–∞—Ä–æ–ª–∏ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –°–ú–ï–ù–ò–¢–ï –¥–ª—è prod!)
DB_PASSWORD=your_secure_password
REDIS_PASSWORD=your_secure_password
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```bash
# –°–æ–∑–¥–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mkdir -p www/upload www/local www/bitrix/cache
mkdir -p volume/logs volume/mysql volume/redis
mkdir -p backups ssl
```

### 5. –ó–∞–ø—É—Å–∫

#### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
```bash
# –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ docker-compose.bitrix.yml
docker compose -f docker-compose.bitrix.yml up -d

# –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
make init-local
```

#### Production:
```bash
# –°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑—ã
docker compose -f docker-compose.bitrix.yml build

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–æ –≤—Å–µ–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏
COMPOSE_PROFILES=prod,monitoring,security,backup docker compose -f docker-compose.bitrix.yml up -d
```

### 6. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ë–∏—Ç—Ä–∏–∫—Å

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://your-domain.local`

–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ë–î:
- **–°–µ—Ä–≤–µ—Ä –ë–î**: `mysql`
- **–ò–º—è –ë–î**: `bitrix_local` (–∏–ª–∏ –∏–∑ `.env`)
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `bitrix`
- **–ü–∞—Ä–æ–ª—å**: –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `DB_PASSWORD` –≤ `.env`

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
b-docker/
‚îú‚îÄ‚îÄ config/                      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ cron/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ crontab             # –ë–∏—Ç—Ä–∏–∫—Å cron –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ grafana/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboards/         # –ì–æ—Ç–æ–≤—ã–µ –¥–∞—à–±–æ—Ä–¥—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ provisioning/       # Datasources
‚îÇ   ‚îú‚îÄ‚îÄ loki/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ loki-config.yaml
‚îÇ   ‚îú‚îÄ‚îÄ mysql/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ my.local.cnf        # MySQL –¥–ª—è local
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ my.prod.cnf         # MySQL –¥–ª—è prod
‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ conf/               # –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ö–æ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ prometheus/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prometheus.yml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rules/              # –ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ promtail/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.yml
‚îÇ   ‚îú‚îÄ‚îÄ redis/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ redis.conf
‚îÇ   ‚îî‚îÄ‚îÄ supervisor/
‚îÇ       ‚îî‚îÄ‚îÄ conf/               # Supervisor –ø—Ä–æ–≥—Ä–∞–º–º—ã
‚îÇ
‚îú‚îÄ‚îÄ docker/
‚îÇ   ‚îú‚îÄ‚îÄ php/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base/               # –ë–∞–∑–æ–≤—ã–µ PHP –æ–±—Ä–∞–∑—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cli/7.4/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cli/8.3/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fpm/7.4/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fpm/8.3/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bitrix/             # ‚≠ê –ù–û–í–´–ô –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ supervisord.conf
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ docker-entrypoint.sh
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ healthcheck.sh
‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îú‚îÄ‚îÄ mysql/
‚îÇ   ‚îú‚îÄ‚îÄ redis/
‚îÇ   ‚îú‚îÄ‚îÄ fail2ban/
‚îÇ   ‚îî‚îÄ‚îÄ backup/
‚îÇ
‚îú‚îÄ‚îÄ volume/                      # Persistent data
‚îÇ   ‚îú‚îÄ‚îÄ logs/                   # –í—Å–µ –ª–æ–≥–∏ (–º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ Loki)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ php/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ php-fpm/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cron/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supervisor/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bitrix/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mysql/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ redis/
‚îÇ   ‚îú‚îÄ‚îÄ mysql/
‚îÇ   ‚îú‚îÄ‚îÄ redis/
‚îÇ   ‚îî‚îÄ‚îÄ grafana/
‚îÇ
‚îú‚îÄ‚îÄ www/                         # –ö–æ–¥ –ë–∏—Ç—Ä–∏–∫—Å (–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
‚îÇ   ‚îú‚îÄ‚îÄ upload/                 # ‚≠ê –ü—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
‚îÇ   ‚îú‚îÄ‚îÄ local/                  # ‚≠ê –ü—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
‚îÇ   ‚îú‚îÄ‚îÄ bitrix/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cache/              # ‚≠ê –ü—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
‚îÇ   ‚îî‚îÄ‚îÄ index.php
‚îÇ
‚îú‚îÄ‚îÄ backups/                     # –ë—ç–∫–∞–ø—ã
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.bitrix.yml    # ‚≠ê –ù–û–í–´–ô –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π compose
‚îú‚îÄ‚îÄ docker-compose.yml           # –°—Ç–∞—Ä—ã–π compose (legacy)
‚îÇ
‚îú‚îÄ‚îÄ .env.local.bitrix           # ‚≠ê –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è local
‚îú‚îÄ‚îÄ .env.dev.bitrix             # ‚≠ê –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è dev
‚îú‚îÄ‚îÄ .env.test.bitrix            # ‚≠ê –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è test
‚îú‚îÄ‚îÄ .env.prod.bitrix            # ‚≠ê –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è production
‚îú‚îÄ‚îÄ .env                         # –ê–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
‚îÇ
‚îú‚îÄ‚îÄ Makefile                     # 150+ –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.BITRIX.md            # ‚≠ê –≠–¢–ê –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π

### üè† Local (–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
cp .env.local.bitrix .env
docker compose -f docker-compose.bitrix.yml --profile local up -d
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Debug —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω (`DEBUG=1`)
- Xdebug –≤–∫–ª—é—á–µ–Ω
- MailHog –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –ø–æ—á—Ç—ã
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- OPcache –æ—Ç–∫–ª—é—á–µ–Ω (–¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞)
- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è (>2 —Å–µ–∫)

**–î–æ—Å—Ç—É–ø:**
- –°–∞–π—Ç: `http://bitrix.local`
- MailHog: `http://localhost:8025`
- Grafana: `http://localhost:3000` (admin/admin)

---

### üîß Dev (–†–∞–∑—Ä–∞–±–æ—Ç—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–µ—Ä)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
cp .env.dev.bitrix .env
docker compose -f docker-compose.bitrix.yml --profile dev,monitoring,security up -d
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Debug —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω
- MailHog –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫
- OPcache –≤–∫–ª—é—á–µ–Ω —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω
- Fail2ban –¥–ª—è –∑–∞—â–∏—Ç—ã

---

### üß™ Test/Staging

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
cp .env.test.bitrix .env
docker compose -f docker-compose.bitrix.yml --profile test,monitoring,security,backup up -d
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–æ –∫ prod
- Debug –æ—Ç–∫–ª—é—á–µ–Ω
- –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- Fail2ban

---

### üè≠ Production

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
cp .env.prod.bitrix .env

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –°–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –≤ .env!
nano .env

# –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑—ã
docker compose -f docker-compose.bitrix.yml build --no-cache

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–æ –í–°–ï–ú–ò –ø—Ä–æ—Ñ–∏–ª—è–º–∏
COMPOSE_PROFILES=prod,monitoring,security,backup,full \
  docker compose -f docker-compose.bitrix.yml up -d
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Debug –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω
- Xdebug —É–¥–∞–ª–µ–Ω
- OPcache –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω
- MySQL –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω (9.6GB buffer pool)
- Redis —Å –±–æ–ª—å—à–∏–º –æ–±—ä–µ–º–æ–º –ø–∞–º—è—Ç–∏ (2GB)
- Fail2ban + ModSecurity
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- –ü–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**‚ö†Ô∏è –í–∞–∂–Ω–æ –¥–ª—è production:**
1. –°–º–µ–Ω–∏—Ç–µ –í–°–ï –ø–∞—Ä–æ–ª–∏ –≤ `.env`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã Let's Encrypt (`SSL=2`)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–Ω–µ—à–Ω–∏–µ –±—ç–∫–∞–ø—ã (S3, Backblaze)
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –≤ Grafana
6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ managed –ë–î (AWS RDS, DO Databases)

---

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ß–µ—Ä–µ–∑ Docker Compose

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose -f docker-compose.bitrix.yml up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose -f docker-compose.bitrix.yml down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ bitrix –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose -f docker-compose.bitrix.yml restart bitrix

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose -f docker-compose.bitrix.yml logs -f bitrix

# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä bitrix
docker compose -f docker-compose.bitrix.yml exec bitrix bash

# –í—Ö–æ–¥ –≤ MySQL
docker compose -f docker-compose.bitrix.yml exec mysql mysql -uroot -p
```

### –ß–µ—Ä–µ–∑ Makefile (–µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω)

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è local –æ–∫—Ä—É–∂–µ–Ω–∏—è
make init-local

# –ó–∞–ø—É—Å–∫
make up

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
make down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
make restart

# –õ–æ–≥–∏
make logs

# –í—Ö–æ–¥ –≤ bitrix –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
make bash

# Composer install
make composer-install

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ë–∏—Ç—Ä–∏–∫—Å
make bitrix-cache-clear

# –ë—ç–∫–∞–ø –ë–î
make backup-db

# –ë—ç–∫–∞–ø —Ñ–∞–π–ª–æ–≤
make backup-files

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
make health
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Supervisor (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)

```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose -f docker-compose.bitrix.yml exec bitrix bash

# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
supervisorctl status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ PHP-FPM
supervisorctl restart php-fpm

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Cron
supervisorctl restart crond

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞
supervisorctl tail -f php-fpm

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞/–∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞
supervisorctl stop php-fpm
supervisorctl start php-fpm
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Grafana

**–î–æ—Å—Ç—É–ø**: `http://your-domain:3000`
**–õ–æ–≥–∏–Ω**: `admin` / –ø–∞—Ä–æ–ª—å –∏–∑ `.env`

**–ì–æ—Ç–æ–≤—ã–µ –¥–∞—à–±–æ—Ä–¥—ã:**
- **Bitrix Performance** - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å PHP, MySQL, Redis
- **Security Dashboard** - –ø–æ–ø—ã—Ç–∫–∏ –∞—Ç–∞–∫, Fail2ban
- **Nginx Dashboard** - –∑–∞–ø—Ä–æ—Å—ã, –æ—à–∏–±–∫–∏, response time
- **System Metrics** - CPU, RAM, Disk, Network

### Prometheus

**–î–æ—Å—Ç—É–ø**: `http://your-domain:9090`

**–ú–µ—Ç—Ä–∏–∫–∏:**
- `container_*` - –º–µ—Ç—Ä–∏–∫–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- `mysql_*` - –º–µ—Ç—Ä–∏–∫–∏ MySQL
- `redis_*` - –º–µ—Ç—Ä–∏–∫–∏ Redis
- `nginx_*` - –º–µ—Ç—Ä–∏–∫–∏ Nginx
- `node_*` - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### Loki + Promtail

**–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤.

**–õ–æ–≥–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏–∑:**
- Nginx (access, error)
- PHP (errors, slow requests)
- PHP-FPM (slow log, errors)
- Cron (–∑–∞–¥–∞—á–∏ –ë–∏—Ç—Ä–∏–∫—Å)
- Supervisor (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏)
- MySQL (slow queries, errors)
- Redis
- Fail2ban (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)

**–ü–æ–∏—Å–∫ –ª–æ–≥–æ–≤ –≤ Grafana:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Grafana ‚Üí Explore
2. –í—ã–±–µ—Ä–∏—Ç–µ Loki data source
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã:

```logql
# –í—Å–µ –ª–æ–≥–∏ PHP
{container_name="bitrix"} |= "php"

# –û—à–∏–±–∫–∏ PHP
{container_name="bitrix"} |= "error"

# –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã MySQL
{container_name="mysql"} |= "slow"

# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ Fail2ban
{container_name="fail2ban"} |= "Ban"

# –õ–æ–≥–∏ Cron (–∞–≥–µ–Ω—Ç—ã –ë–∏—Ç—Ä–∏–∫—Å)
{container_name="bitrix",job="cron"}
```

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. Fail2ban

**–ó–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ –∏ DDoS –∞—Ç–∞–∫**

**Jail'—ã:**
- `nginx-req-limit` - DDoS –∑–∞—â–∏—Ç–∞
- `nginx-403` - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- `nginx-404` - –±–æ—Ç—ã
- `nginx-brute` - –±—Ä—É—Ç—Ñ–æ—Ä—Å –∞–¥–º–∏–Ω–∫–∏
- `nginx-sqli` - SQL injection
- `nginx-xss` - XSS –∞—Ç–∞–∫–∏

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –°—Ç–∞—Ç—É—Å
docker compose exec fail2ban fail2ban-client status

# –°–ø–∏—Å–æ–∫ –∑–∞–±–∞–Ω–µ–Ω–Ω—ã—Ö IP
docker compose exec fail2ban fail2ban-client status nginx-brute

# –†–∞–∑–±–∞–Ω IP
docker compose exec fail2ban fail2ban-client unban 192.168.1.100

# –ë–∞–Ω IP –≤—Ä—É—á–Ω—É—é
docker compose exec fail2ban fail2ban-client ban 192.168.1.100 nginx-brute
```

### 2. SSL/TLS

**Let's Encrypt (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ):**
```bash
# –í .env —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
SSL=2
EMAIL=your@email.com

# –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
```

**Self-signed (–¥–ª—è dev):**
```bash
SSL=1
```

### 3. Security Headers

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ Nginx:
- `X-Frame-Options: SAMEORIGIN`
- `X-Content-Type-Options: nosniff`
- `X-XSS-Protection: 1; mode=block`
- `Content-Security-Policy`
- `Referrer-Policy`

### 4. Firewall

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è UFW (Linux):**

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å SSH
sudo ufw allow 22/tcp

# –†–∞–∑—Ä–µ—à–∏—Ç—å HTTP/HTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# –ó–ê–ö–†–´–¢–¨ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ
sudo ufw default deny incoming

# –í–∫–ª—é—á–∏—Ç—å
sudo ufw enable
```

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è MySQL

**–ü—Ä–æ–≤–µ—Ä–∫–∞ buffer pool hit rate:**
```sql
SHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool_read%';
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å > 99%
```

**–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
```bash
# –ê–Ω–∞–ª–∏–∑ slow.log
docker compose exec mysql pt-query-digest /var/log/mysql/slow.log
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Redis

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```bash
# –í—Ö–æ–¥ –≤ Redis
docker compose exec redis redis-cli -a your_password

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
INFO stats

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
INFO memory

# Hit rate
INFO stats | grep keyspace
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è PHP

**OPcache —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
```php
<?php
// –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª opcache-status.php –≤ www/
opcache_get_status();
```

**PHP-FPM pool —Å—Ç–∞—Ç—É—Å:**
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ nginx:
# location ~ ^/(fpm-status|fpm-ping)$ {
#     fastcgi_pass bitrix:9000;
# }

curl http://localhost/fpm-status?full
```

### –ë–∏—Ç—Ä–∏–∫—Å –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∫—ç—à

1. –ê–¥–º–∏–Ω–∫–∞ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
2. –í–∫–ª—é—á–∏—Ç—å "–ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π —Å–∞–π—Ç"
3. –†–µ–∂–∏–º: "–ê–≤—Ç–æ + –ö–æ–º–ø–æ–Ω–µ–Ω—Ç"

---

## üíæ –ë—ç–∫–∞–ø—ã

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ `.env`:**
```bash
# –ë–î: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2:00
BACKUP_SCHEDULE_DB=0 2 * * *

# –§–∞–π–ª—ã: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00
BACKUP_SCHEDULE_FILES=0 3 * * *

# –•—Ä–∞–Ω–∏—Ç—å 30 –¥–Ω–µ–π
BACKUP_RETENTION_DAYS=30
```

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `./backups/`

### –†—É—á–Ω—ã–µ –±—ç–∫–∞–ø—ã

```bash
# –ë—ç–∫–∞–ø –ë–î
docker compose exec mysql mysqldump -uroot -pYOUR_PASSWORD bitrix_prod > backup_$(date +%Y%m%d).sql

# –ë—ç–∫–∞–ø —Ñ–∞–π–ª–æ–≤
tar -czf backup_files_$(date +%Y%m%d).tar.gz ./www/upload ./www/local

# –ë—ç–∫–∞–ø –ë–î —á–µ—Ä–µ–∑ Makefile
make backup-db

# –ë—ç–∫–∞–ø —Ñ–∞–π–ª–æ–≤
make backup-files

# –ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø (–ë–î + —Ñ–∞–π–ª—ã)
make backup-full
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
docker compose exec -T mysql mysql -uroot -pYOUR_PASSWORD bitrix_prod < backup_20250101.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
tar -xzf backup_files_20250101.tar.gz -C ./www/
```

### –í–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è prod)

**AWS S3:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ AWS CLI
aws s3 sync ./backups/ s3://your-bucket/bitrix-backups/
```

**Rsync –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:**
```bash
rsync -avz --delete ./backups/ user@backup-server:/backups/bitrix/
```

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose -f docker-compose.bitrix.yml logs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã
netstat -tulpn | grep -E '80|443|3306|6379|9000'

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
ls -la ./www ./volume

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑—ã
docker compose -f docker-compose.bitrix.yml build --no-cache
```

### –ü—Ä–æ–±–ª–µ–º–∞: 502 Bad Gateway

**–ü—Ä–∏—á–∏–Ω—ã:**
1. PHP-FPM –Ω–µ –∑–∞–ø—É—â–µ–Ω
2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ socket

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PHP-FPM
docker compose exec bitrix supervisorctl status php-fpm

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker compose exec bitrix supervisorctl restart php-fpm

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs bitrix
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∏—Ç—Ä–∏–∫—Å –ø–∏—à–µ—Ç "–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MySQL
docker compose exec mysql mysqladmin ping -h localhost

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ .env
grep DB_PASSWORD .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .settings.php –ë–∏—Ç—Ä–∏–∫—Å–∞
cat www/bitrix/.settings.php | grep -A 10 connections
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∞–π—Ç–∞

**–ß–µ–∫–ª–∏—Å—Ç:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ OPcache: `opcache.enable=1`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MySQL buffer pool
3. –í–∫–ª—é—á–∏—Ç–µ –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∫—ç—à –ë–∏—Ç—Ä–∏–∫—Å–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ MySQL
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PHP-FPM slow

```bash
# –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã MySQL
docker compose exec mysql tail -f /var/log/mysql/slow.log

# –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã PHP-FPM
docker compose exec bitrix tail -f /var/log/php-fpm/slow.log
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —Ñ–∞–π–ª—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π UID/GID
id -u  # UID
id -g  # GID

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ .env
UID=1000
GID=1000

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose -f docker-compose.bitrix.yml down
docker compose -f docker-compose.bitrix.yml up -d --build

# –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ –≤—Ä—É—á–Ω—É—é
sudo chown -R 1000:1000 ./www/upload
sudo chmod -R 777 ./www/upload ./www/bitrix/cache
```

---

## ‚ùì FAQ

### –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ Windows?

**–î–∞!** –ù–æ —Ç–æ–ª—å–∫–æ —Å WSL 2.

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WSL 2
wsl --install

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Desktop for Windows
# –í–∫–ª—é—á–∏—Ç–µ WSL 2 integration –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Docker Desktop

# –†–∞–±–æ—Ç–∞–π—Ç–µ –∏–∑ WSL —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
wsl
cd /mnt/c/projects/b-docker
```

### –ö–∞–∫–∞—è –≤–µ—Ä—Å–∏—è PHP —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è?

**PHP 8.3** - –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è, –ª—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

**PHP 7.4** - –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å—Ç–∞—Ä—ã–µ –º–æ–¥—É–ª–∏ –ë–∏—Ç—Ä–∏–∫—Å.

### –ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤–µ—Ä—Å–∏—é PHP?

```bash
# –í .env –∏–∑–º–µ–Ω–∏—Ç–µ:
PHP_VERSION=8.3

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ
docker compose -f docker-compose.bitrix.yml build --no-cache bitrix
docker compose -f docker-compose.bitrix.yml up -d bitrix
```

### –ú–æ–∂–Ω–æ –ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∞–π—Ç–æ–≤?

**–î–∞!** –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π `.env` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∞–π—Ç–∞ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º `DOMAIN`.

```bash
# –°–∞–π—Ç 1
DOMAIN=site1.local docker compose up -d

# –°–∞–π—Ç 2
DOMAIN=site2.local docker compose -p site2 up -d
```

### –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –ë–∏—Ç—Ä–∏–∫—Å?

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ:
1. –ê–¥–º–∏–Ω–∫–∞ ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
2. –°–∫–∞—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

**–ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å:**
```bash
docker compose exec bitrix bash
php bitrix/modules/main/tools/updater.php
```

### –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SMTP –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—á—Ç—ã?

**–í .env:**
```bash
# –î–ª—è local/dev –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ MailHog (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

# –î–ª—è prod –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ –ë–∏—Ç—Ä–∏–∫—Å:
# –ê–¥–º–∏–Ω–∫–∞ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü–æ—á—Ç–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è ‚Üí –ü–æ—á—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã
```

### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–≥–∏?

```
./volume/logs/
‚îú‚îÄ‚îÄ nginx/          - access.log, error.log
‚îú‚îÄ‚îÄ php/            - php_errors.log
‚îú‚îÄ‚îÄ php-fpm/        - slow.log, error.log
‚îú‚îÄ‚îÄ cron/           - cron.log
‚îú‚îÄ‚îÄ supervisor/     - supervisord.log, –ø—Ä–æ–≥—Ä–∞–º–º—ã
‚îú‚îÄ‚îÄ bitrix/         - –±–∏—Ç—Ä–∏–∫—Å –ª–æ–≥–∏
‚îú‚îÄ‚îÄ mysql/          - slow.log, error.log
‚îî‚îÄ‚îÄ redis/          - redis.log
```

–í—Å–µ –ª–æ–≥–∏ —Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ **Grafana —á–µ—Ä–µ–∑ Loki**.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [Troubleshooting](#-troubleshooting)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [FAQ](#-faq)
3. –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏: `docker compose logs -f`
4. –°–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ 1–°-–ë–∏—Ç—Ä–∏–∫—Å

**–ê–≤—Ç–æ—Ä**: DevOps Engineer
**–í–µ—Ä—Å–∏—è**: 2.0 (Bitrix Unified Container Edition)

---

**‚≠ê –ï—Å–ª–∏ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –≤–∞–º –ø–æ–º–æ–≥, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub!**
