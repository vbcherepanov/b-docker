# ============================================================================
# HTTPS Server - Production configuration with SSL
# ============================================================================
server {
    listen 443 ssl http2;
    server_name bitrix.vbch.dev;

    ssl_certificate /etc/ssl/certs/fullchain.pem;
    ssl_certificate_key /etc/ssl/certs/privkey.pem;

    include /etc/nginx/snippets/ssl.conf;

    charset utf-8;
    index index.php;
    root /home/bitrix/app;
    server_tokens off;
    client_max_body_size 128m;

    include /etc/nginx/snippets/header.conf;
    include /etc/nginx/snippets/resolver.conf;
    include /etc/nginx/snippets/bitrix.conf;
}

# ============================================================================
# HTTP to HTTPS redirect
# ============================================================================
server {
    listen 80;
    server_name bitrix.vbch.dev;
    return 301 https://$host$request_uri;
}
