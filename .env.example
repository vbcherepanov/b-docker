# Пример файла конфигурации
# Скопируйте этот файл в .env и отредактируйте под ваши нужды
# ==============================================

# Общие настройки
TZ=Europe/Moscow
ENVIRONMENT=local
DEBUG=1
DOMAIN=bitrix.local
EMAIL=admin@bitrix.local
# Режимы SSL:
#   0    = без SSL (HTTP only)
#   self = свои сертификаты (положить в config/nginx/ssl/${DOMAIN}/)
#   free = Let's Encrypt (автоматическая генерация и обновление)
SSL=0
UGN=bitrix
UID=1000
GID=1000
DOLLAR=$

# Порты
HTTP_PORT=80
HTTPS_PORT=443
DB_PORT=3306
RABBIT_PORT=5672
MAILHOG_PORT=1025
MAILHOG_WEB_PORT=8025
REDIS_PORT=6379
PORTAINER_PORT=9443
PUSH_PUB_PORT=9010
PUSH_SUB_PORT=8010

# PHP настройки
# Доступные версии: 7.4, 8.3, 8.4
# ВНИМАНИЕ: PHP 8.4 экспериментальная, Bitrix официально поддерживает до 8.3
PHP_VERSION=8.3
BITRIX_VM_VER=7.5.5

# База данных
DB_HOST=mysql
DB_NAME=bitrix
DB_USERNAME=bitrix
DB_PASSWORD=bitrix123
DB_ROOT_PASSWORD=root123
# MySQL image: mariadb:10.11 (low RAM servers), mysql:8.0 (normal servers)
MYSQL_IMAGE=mariadb:10.11

# Redis
REDIS_HOST=redis
REDIS_PASSWORD=

# RabbitMQ
RABBIT_COOKIE=SWQOKODSQALRPCLNMEQG
RABBITMQ_DEFAULT_USER=admin
RABBITMQ_DEFAULT_PASS=admin123
RABBITMQ_DEFAULT_VHOST=/

# Memcached
MEMCACHED_CONN_LIMIT=1024
MEMCACHED_MEMORY_LIMIT=256
MEMCACHED_THREADS=4

# Конфигурации субдоменов
# При включении автоматически создаются:
# - nginx конфиг для субдомена
# - SSL сертификат (если SSL=free)
MAIL_CONFIG=0
RABBIT_CONFIG=0
GRAFANA_CONFIG=0
PROMETHEUS_CONFIG=0

# Кастомные имена субдоменов (по умолчанию: mail, rabbit, grafana, prometheus)
# Пример: GRAFANA_SUBDOMAIN=mon → mon.bitrix.local
MAIL_SUBDOMAIN=mail
RABBIT_SUBDOMAIN=rabbit
GRAFANA_SUBDOMAIN=grafana
PROMETHEUS_SUBDOMAIN=prometheus

# Basic Auth для субдоменов мониторинга (grafana, prometheus, rabbit)
# Используется если соответствующий *_CONFIG=1
MONITORING_USER=admin
MONITORING_PASSWORD=changeme123

# Backup настройки
BACKUP_SCHEDULE_DB="0 2 * * *"
BACKUP_SCHEDULE_FILES="0 3 * * *"
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=./backups

# Мониторинг
ENABLE_GRAFANA=1
ENABLE_PROMETHEUS=1
ENABLE_LOKI=1

# Portainer Agent
ENABLE_PORTAINER_AGENT=1
PORTAINER_AGENT_SECRET=myagentsecret

# Push Server (for Bitrix real-time notifications)
# Секретный ключ для подписи соединений между PHP и Push Server
# Генерируйте случайную строку: openssl rand -hex 32
PUSH_SECURITY_KEY=your_push_server_security_key_here

# Email для Let's Encrypt (обязателен при SSL=free)
LETSENCRYPT_EMAIL=admin@example.com