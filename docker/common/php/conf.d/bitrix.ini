; =============================================================================
; BITRIX-SPECIFIC PHP CONFIGURATION
; Based on official Bitrix env-docker settings
; https://github.com/bitrix-tools/env-docker
; =============================================================================
; NOTE: Dynamic settings (memory_limit, upload sizes, timeouts, timezone)
;       are generated at container startup in 98-php-runtime.ini
; =============================================================================

; --- Error Logging ---
error_log = /dev/stderr

; --- Security (Bitrix official) ---
expose_php = Off
mail.add_x_header = Off
enable_dl = Off

; --- Bitrix-specific Settings ---
short_open_tag = On
upload_tmp_dir = "/home/bitrix/tmp"
request_order = "GP"
variables_order = "GPCS"

; --- Resource Limits (Bitrix official, static) ---
; max_input_vars: Critical for Bitrix forms with many fields
max_input_vars = 10000
max_file_uploads = 100
output_buffering = 4096

; --- PCRE Limits (Bitrix official) ---
pcre.backtrack_limit = 1000000
pcre.recursion_limit = 14000

; --- Realpath Cache ---
realpath_cache_size = 4096k

; --- Charset ---
default_charset = UTF-8

; --- Sessions (Bitrix official) ---
session.name = BITRIX_PHPSESSID
session.cookie_samesite = "Lax"
session.cookie_httponly = On
session.save_path = "/var/lib/php/sessions"
; session.cookie_secure auto-generated in 99-runtime.ini based on SSL variable

; --- MySQL Sockets (Bitrix official) ---
mysql.default_socket = /var/lib/mysqld/mysqld.sock
mysqli.default_socket = /var/lib/mysqld/mysqld.sock
